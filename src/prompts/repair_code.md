Fix the Python code to satisfy all listed obligations.

Rules:
1. Modify Python code only.
2. Do not modify obligations or assumptions.
3. Preserve signatures and intent.
4. Return code only (no markdown).

